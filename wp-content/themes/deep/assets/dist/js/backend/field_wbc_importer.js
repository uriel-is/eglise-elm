"use strict";!function(B){B.redux=B.redux||{},B.redux.wbc_importer=function(){var u,w,h,g="no",f="no",b="no",y="no",k="no",v="no",x="no",C="no",j="elementor",P=!1,I=[],r=B(".wn-lightbox-wrap"),e=B(".wn-pagebuilder-wrap");function S(e,t,o,i,n,s){I=[],B.ajax({url:ajaxurl,type:"POST",data:e,beforeSend:function(e,n){I.push(e)}}).done(function(e){var n;t.find(".wbc_image").css("opacity","1"),t.find(".spinner").css("display","none"),0<e.length&&e.match(/Have fun!/gi)?(t.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data"),t.find(".theme-actions .wbc-importer-buttons").append('<div id="wbc-importer-reimport" class="wbc-importer-buttons button-primary import-demo-data importer-button">Re-Import</div>'),t.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),t.find(".importer-button").attr("style",""),t.addClass("imported active").removeClass("not-imported"),t.find("#wbc-importer-reimport").hide(),"wbc-import-2"==i?location.reload(!1):(o.find("i.ti-close").show(),(n=B('.wn-lightbox[data-demo-id="'+i+'"]')).children("h2").hide(),n.find(".wni-start").hide(),n.children(".wn-suc-imp-title").fadeIn(),n.find(".wn-suc-imp-t100").fadeIn(),n.find(".wn-suc-imp-links").fadeIn(),B(".wsw-menu").find("li.active:last").next().addClass("active"),B(".wsw-btn-step").hide())):(w.trigger("click"),console.log("ReImport"))}).fail(function(){w.trigger("click")}),n.find(".wni-downloading-data").hide(),0==B(".wbc-progress-back").length&&(n.prepend('<div class="wbc-progress-back"><div class="wbc-progress-bar button-primary"><span class="wbc-progress-count">0%</span></div>'),function i(s,r,a){var e=jQuery('.wrap-importer[data-demo-id="wbc-import-75"]').next('.wn-lightbox-wrap[style="display: block;"]').length,n=jQuery('.wrap-importer[data-demo-id="wbc-import-76"]').next('.wn-lightbox-wrap[style="display: block;"]').length,t=jQuery('.wrap-importer[data-demo-id="wbc-import-77"]').next('.wn-lightbox-wrap[style="display: block;"]').length,o=jQuery('.wrap-importer[data-demo-id="wbc-import-78"]').next('.wn-lightbox-wrap[style="display: block;"]').length;{var d;(0<e||0<n||0<t||0<o)&&0<B(".wbc-progress-bar").length&&(d=setInterval(function(){var e=B(".wbc-progress-count").text(),e=parseInt(e.split("%",1)[0]);e<99?(e++,B(".wbc-progress-count").text(e+"%"),B(".wbc-progress-bar").css("width",e+"%")):clearInterval(d)},12e3))}s.action="redux_wbc_importer_progress";console.log(s);jQuery.ajax({url:ajaxurl,data:s,beforeSend:function(e,n){I.push(e)},success:function(e){var n,t,o=jQuery.parseJSON(e);console.log(o),0<e.length&&"object"==typeof o?o.imported_count!=o.total_post&&(console.log("Total: "+o.total_post),console.log("Imported: "+o.imported_count),n=Math.floor(o.imported_count/o.total_post*100),(t=B(".wbc-progress-count").text().replace("%",""))<=n&&(n=0<n?n-1:n,B(".wbc-progress-bar").css("width",n+"%"),B(".wbc-progress-count").text(n+"%")),n==t?a--:a=20,1==a&&(console.log("Progress repeat: "+a),r.trigger("click")),setTimeout(function(){i(s,r,a)},2e3)):setTimeout(function(){i(s,r,a)},2e3)},fail:function(){setTimeout(function(){i(s,r,a)},2e3)},complete:function(e){I.splice(B.inArray(e,I),1)}})}(e,t,s))}B(".elementor-builder").each(function(e,n){var t=B(n),o=t.closest(".wni-settings"),i=o.find(".kc-builder"),s=o.find(".vc-builder");"none"==t.css("display")&&(t.removeClass("checked"),t.find(".wn-radio-indicator").removeClass("checked"),"none"==i.css("display")?(i.removeClass("checked"),i.find(".wn-radio-indicator").removeClass("checked"),s.addClass("checked"),s.find(".wn-radio-indicator").addClass("checked")):(i.addClass("checked"),i.find(".wn-radio-indicator").addClass("checked"))),t.hasClass("checked")?(o.find('.wn-plugin[data-plugin-name="Elementor"]').show(),o.find('.wn-plugin[data-plugin-name="KingComposer pro"]').hide(),o.find('.wn-plugin[data-plugin-name="WPBakery Page Builder"]').hide(),o.find('.wn-plugin[data-plugin-name="KingComposer"]').hide()):i.hasClass("checked")?(o.find('.wn-plugin[data-plugin-name="Elementor"]').hide(),o.find('.wn-plugin[data-plugin-name="KingComposer"]').show(),o.find('.wn-plugin[data-plugin-name="KingComposer pro"]').show(),o.find('.wn-plugin[data-plugin-name="WPBakery Page Builder"]').hide()):(o.find('.wn-plugin[data-plugin-name="Elementor"]').hide(),o.find('.wn-plugin[data-plugin-name="KingComposer"]').hide(),o.find('.wn-plugin[data-plugin-name="KingComposer pro"]').hide(),o.find('.wn-plugin[data-plugin-name="WPBakery Page Builder"]').show())}),B(document).on("click",".import-risk-btn",function(e){e.preventDefault(),B("#wni-bad-status-message").fadeOut()}),B(".wrap-importer.theme.not-imported .wbc-importer-buttons .button, #wbc-importer-reimport").unbind("click").on("click",function(e){e.preventDefault();var n,t,o=B(this).closest(".wrap-importer").data("demo-id"),i=B("#wni-bad-status-message"),s=B("#wnInvalidPurchaseCode");0<s.length?(n=s.clone().show(),s.remove(),r.find('.wn-lightbox[data-demo-id="'+o+'"]').children("h2").after(n)):0<i.length&&(t=i.clone().show(),i.remove(),r.find('.wn-lightbox[data-demo-id="'+o+'"]').children("h2").after(t)),r.find('.wn-lightbox[data-demo-id="'+o+'"]').find(".wni-settings").niceScroll({scrollbarid:"wn-lb-content",cursorwidth:"10px",cursorborder:"0",touchbehavior:!0,autohidemode:!1,background:"#e7e7e7",cursorcolor:"#91989e"}),r.find('.wn-lightbox[data-demo-id="'+o+'"]').find(".wni-settings").getNiceScroll().resize(),r.find('.wn-lightbox[data-demo-id="'+o+'"]').find(".wn-import-content-wrap").find(".wn-checkbox-wrap").find("input").each(function(){var e=B(this),n=e.attr("id").slice(0,-1);e.is(":checked")?"all"==n?g=f=b=y=k=C=x=v="yes":"pages"==n?g="yes":"posts"==n?f="yes":"contact_forms"==n?b="yes":"portfolios"==n?y="yes":"images"==n?k="yes":"widgets"==n?v="yes":"themeoptions"==n?x="yes":"sliders"==n&&(C="yes"):"all"==n?g=f=b=y=k=C=x=v="no":"pages"==n?g="no":"posts"==n?f="no":"contact_forms"==n?b="no":"portfolios"==n?y="no":"images"==n?k="no":"widgets"==n?v="no":"themeoptions"==n?x="no":"sliders"==n&&(C="no"),"yes"==g||"yes"==f||"yes"==b||"yes"==y||"yes"==k||"yes"==C||"yes"==x||"yes"==v?(P=!0,e.closest(".wn-lb-content").find(".wn-import-demo-btn").css({opacity:"1",cursor:"pointer"})):(P=!1,e.closest(".wn-lb-content").find(".wn-import-demo-btn").css({opacity:"0.6",cursor:"not-allowed"}))}),r.find('.wn-lightbox[data-demo-id="'+o+'"]').show().closest(".wn-lightbox-wrap").show()}),r.find("i.ti-close").on("click",function(e){e.preventDefault(),r.hide(),B(".wni-settings").getNiceScroll().remove()}),e.find("input").on("change",function(e){e.preventDefault();var n=B(this),t=n.closest(".wnl-row").next(),o=t.find('.wn-plugin[data-plugin-name="WPBakery Page Builder"]'),i=t.find('.wn-plugin[data-plugin-name="KingComposer"]'),s=t.find('.wn-plugin[data-plugin-name="KingComposer pro"]'),r=t.find('.wn-plugin[data-plugin-name="Elementor"]'),a=n.parent(),d=n.siblings(".wn-radio-indicator");n.closest(".wn-pagebuilder-wrap").find(".wn-radio-control").removeClass("checked").end().find("input").removeAttr("checked").end().find(".wn-radio-indicator").removeClass("checked"),n.attr("checked","checked"),a.addClass("checked"),d.addClass("checked"),"kingcomposer"==n.val()?(j="kc",i.show(),s.show(),o.hide(),r.hide()):"visualcomposer"==n.val()?(j="vc",i.hide(),s.hide(),r.hide(),o.show()):(j="elementor",r.show(),i.hide(),s.hide(),o.hide())}),B(".wn-import-content-wrap").find("label").on("click",function(){var e=B(this),n=e.attr("for").replace(/\d+/g,""),t=B(this).siblings("input"),o=e.closest(".wn-checkbox-wrap").siblings(".wn-checkbox-wrap").find("input"),i=e.closest(".wn-checkbox-wrap").siblings(".wn-checkbox-wrap.wn-all-contents").find("input");t.is(":checked")?"all"==n?(g=f=b=y=k=C=x=v="no",o.attr("checked",!1)):(i.attr("checked",!1),"pages"==n?g="no":"posts"==n?f="no":"contact_forms"==n?b="no":"portfolios"==n?y="no":"images"==n?k="no":"widgets"==n?v="no":"themeoptions"==n?x="no":"sliders"==n&&(C="no")):"all"==n?(g=f=b=y=k=C=x=v="yes",o.attr("checked",!0)):(1<o.not(":checked").length?i.attr("checked",!1):i.attr("checked",!0),"pages"==n?g="yes":"posts"==n?f="yes":"contact_forms"==n?b="yes":"portfolios"==n?y="yes":"images"==n?k="yes":"widgets"==n?v="yes":"themeoptions"==n?x="yes":"sliders"==n&&(C="yes")),"yes"==g||"yes"==f||"yes"==b||"yes"==y||"yes"==k||"yes"==C||"yes"==x||"yes"==v?(P=!0,e.closest(".wn-lb-content").find(".wn-import-demo-btn").css({opacity:"1",cursor:"pointer"})):(P=!1,e.closest(".wn-lb-content").find(".wn-import-demo-btn").css({opacity:"0.6",cursor:"not-allowed"}))}),B(".wn-import-demo-btn").unbind("click").on("click",function(e){if(e.preventDefault(),console.log("start import"),P){var n=(w=B(this)).closest(".wn-lightbox").data("demo-id");"kingcomposer"==(j=w.closest(".wni-settings").find(".wn-pagebuilder-wrap").find(".wn-radio-control.checked").find("input").val())?j="kc":"visualcomposer"==j&&(j="vc"),B(".wsw-btn-step").hide(),u=B('.wrap-importer[data-demo-id="'+n+'"]');if(0==I.length)if(0==confirm("By importing the demo content, items such as pages, posts, images, sliders, theme options, widgets and other configurations will be imported as well. it will take several minutes.\n\n Note: 'Shop' and 'Buddypress' demos will take 15 minutes approximately to be imported."))return;u.find(".spinner").css("display","inline-block"),u.removeClass("active imported"),u.find(".importer-button").hide();var t={action:"webnus_create_demo_dir"};t.demo_import_id=u.attr("data-demo-id"),t.nonce=u.attr("data-nonce");var o={action:"redux_wbc_importer"};o.demo_import_id=u.attr("data-demo-id"),o.nonce=u.attr("data-nonce"),o.type="import-demo-content",o.pages=g,o.posts=f,o.contact_forms=b,o.portfolios=y,o.fetch_attachments=k,o.import_widgets=v,o.import_theme_opts=x,o.import_sliders=C,o.page_builder=j,u.find(".wbc_image").css("opacity","0.5"),0<I.length&&(B.each(I,function(e,n){n.abort()}),I.length=0);var i,s,r,a,d,c,l=B('.wn-lightbox[data-demo-id="'+n+'"]'),p=l.closest(".wn-lightbox-wrap"),m=l.find(".wni-start");return i=B('.wn-lightbox[data-demo-id="'+n+'"]'),s=i.closest(".wn-lightbox-wrap"),r=i.find(".wni-settings"),a=i.find(".wn-suc-imp-content-wrap"),d=i.find(".wni-start"),c=s.find(".nicescroll-rails"),s.find("i.ti-close").hide(),r.hide(),c.hide(),a.fadeIn(),a.find(".wn-suc-imp-t100").hide().end().find(".wn-suc-imp-links").hide(),d.prepend('<span class="wni-downloading-data">Downloading Demo Data ...</span>'),h?(B.isEmptyObject(I)?console.log("empty xhrPool"):(console.log(I),B.each(I,function(e,n){n.abort()}),I=[]),S(o,u,p,n,m,24)):(h=!0,B.ajax({url:ajaxurl,type:"POST",data:t,tryCount:0,retryLimit:3,beforeSend:function(e,n){I.push(e)}}).done(function(){B.isEmptyObject(I)?console.log("empty xhrPool"):(console.log(I),B.each(I,function(e,n){n.abort()}),I=[]),S(o,u,p,n,m,24)}).fail(function(e,n,t){return"timeout"==n?(this.tryCount++,this.tryCount<=this.retryLimit?void B.ajax(this):void 0):void e.status})),!1}}),B.xhrPool=[],B.xhrPool.abortAll=function(){_.each(this,function(e){e.abort()})},B.ajaxSetup({beforeSend:function(e){B.xhrPool.push(e)}})},B(document).ready(function(){B.redux.wbc_importer()})}(jQuery);